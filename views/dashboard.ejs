<%- include('partials/navbar') %>

<div class="min-h-screen w-auto bg-slate-200 pt-24 px-16">
  <div class="bg-white w-full rounded-lg shadow-md p-6">
    <div class="w-full flex justify-between">
      <h1 class="text-2xl font-bold mb-4">Data Jadwal</h1>

      <a href="/dashboard/jadwal/add" 
        class="bg-blue-600 text-white px-3 py-2 rounded mb-4 inline-block hover:bg-blue-700 transition">
        + Tambah Jadwal
      </a>
    </div>
    

    <table class="table-auto w-full">
      <thead class="bg-gray-200">
        <tr>
          <th class=" px-4 py-2">No</th>
          <th class=" px-4 py-2">Nama</th>
          <th class=" px-4 py-2">Hari</th>
          <th class=" px-4 py-2">Tanggal</th>
          <th class=" px-4 py-2">Jam Masuk</th>
          <th class=" px-4 py-2">Aksi</th>
        </tr>
      </thead>
      <tbody>
        <% if (jadwal.length === 0) { %>
          <tr>
            <td colspan="6" class="border px-4 py-4 text-center text-gray-500">
              Belum ada jadwal yang dibuat.
            </td>
          </tr>
        <% } else { %>
          <% jadwal.forEach((j, i) => { %>
            <tr class="hover:bg-gray-50">
              <td class=" px-4 py-2 text-center"><%= i + 1 %></td>
              <td class=" px-4 py-2"><%= j.nama %></td>
              <td class=" px-4 py-2 text-center"><%= j.hari %></td>
              <td class=" px-4 py-2 text-center"><%= new Date(j.tanggal).toLocaleDateString("id-ID") %></td>
              <td class=" px-4 py-2 text-center"><%= j.jam_masuk %></td>
              <td class=" px-4 py-2 text-center space-x-2">
                <!-- Tombol Lihat Absensi -->
                <a href="/dashboard/jadwal/<%= j.id %>/absensi" 
                   class="bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 transition">
                  Lihat Absensi
                </a>

                <!-- Tombol Edit -->
                <a href="/dashboard/jadwal/edit/<%= j.id %>" 
                   class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600 transition">
                  Edit
                </a>

                <!-- Tombol Hapus -->
                <form action="/dashboard/jadwal/delete/<%= j.id %>" method="POST" class="inline-block"
                      onsubmit="return confirm('Yakin ingin menghapus jadwal ini?');">
                  <button type="submit" 
                          class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition">
                    Hapus
                  </button>
                </form>
              </td>
            </tr>
          <% }) %>
        <% } %>
      </tbody>
    </table>
  </div>
</div>
