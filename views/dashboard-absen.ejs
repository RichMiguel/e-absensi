<%- include('partials/navbar') %>

<div class="min-h-screen w-auto bg-slate-200 pt-24 px-16">
  <div class="bg-white w-full rounded-lg shadow-md p-6">
    <h1 class="text-2xl font-bold mb-4">
      Log Absensi - <%= jadwal.nama %> (<%= new Date(jadwal.tanggal).toLocaleDateString() %>)
    </h1>

    <a href="/dashboard/jadwal" class="text-blue-600 mb-4 inline-block">&larr; Kembali ke Jadwal</a>

    <table class="table-auto w-full mt-3">
      <thead class="bg-gray-200">
        <tr>
          <th class="px-4 py-2">No</th>
          <th class="px-4 py-2">NIS</th>
          <th class="px-4 py-2">Nama</th>
          <th class="px-4 py-2">Waktu Absensi</th>
          <th class="px-4 py-2">Status</th>
        </tr>
      </thead>
      <tbody>
        <% if (jadwal.absensi.length > 0) { %>
          <% jadwal.absensi.forEach((a, i) => { %>
            <tr>
              <td class="px-4 py-2"><%= i + 1 %></td>
              <td class="px-4 py-2"><%= a.siswa.no_induk %></td>
              <td class="px-4 py-2"><%= a.siswa.nama %></td>
              <td class="px-4 py-2"><%= new Date(a.waktu_absensi).toLocaleTimeString() %></td>
              <td class="px-4 py-2 <%= a.status === 'TERLAMBAT' ? 'text-red-500' : 'text-green-600' %>">
                <%= a.status %>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="5" class="text-center p-3 text-gray-500">Belum ada absensi pada jadwal ini</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>
